version: '3.8'

services:
  disk-ai-chat:
    container_name: diskML
    build:
      context: .
      dockerfile_inline: |
        FROM python:3.11-slim
        WORKDIR /app
        RUN pip install streamlit pandas joblib requests
        COPY feature_importance.csv .
        COPY disk_model.pkl .
        COPY app.py .
        EXPOSE 8501
        CMD ["streamlit", "run", "app.py", "--server.port=8501", "--server.address=0.0.0.0"]
    ports:
      - "8501:8501"
    depends_on:
      - ollama

  ollama:
    image: ollama/ollama:latest
    container_name: ollama_service
    ports:
      - "11434:11434"
    volumes:
      - ollama_storage:/root/.ollama

volumes:
  ollama_storage: